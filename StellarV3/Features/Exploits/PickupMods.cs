using Il2CppVRC.SDKBase;

namespace StellarV3.Features.Pickups
{
    internal class PickupMods
    {
        public static bool infReach = false;
        private static Dictionary<VRC_Pickup, float> originalRange = new Dictionary<VRC_Pickup, float>();

        public static void InfReach(bool state)
        {
            infReach = state;

            if (state)
            {
                originalRange.Clear();
                foreach (var pickup in UnityEngine.Object.FindObjectsOfType<VRC_Pickup>())
                {
                    if (!originalRange.ContainsKey(pickup))
                    {
                        originalRange[pickup] = pickup.proximity;
                    }

                    pickup.proximity = 9999f;
                }
            }
            else
            {
                foreach (var pickup in UnityEngine.Object.FindObjectsOfType<VRC_Pickup>())
                {
                    if (originalRange.TryGetValue(pickup, out float original))
                    {
                        pickup.proximity = original;
                    }
                    else
                    {
                        pickup.proximity = 2f;
                    }
                }

                originalRange.Clear();
            }
        }
    }
}
